# Firebase Authentication × LINEログイン技術検証デモサイト 要件定義

## 1. 概要（目的）

LINEログインを通じて Firebase Authentication にユーザーをログインさせる技術構成の検証と共有を目的としたデモサイトを作成する。スマートフォン環境（特に iOS Safari）でも安定して動作するカスタム認証フローを実現できるかを確認する。

特にスマートフォン（iOS Safari）環境で、`signInWithRedirect` を使用して LINE ネイティブアプリで認証を行うと、Safari にリダイレクトされる際に別タブで開かれてしまい、Firebase Authentication のセッションストレージが共有されず認証が失敗する問題がある。これを回避するために、LINE SDK を利用した方式を検証対象とする。

参考: [Firebase 公式ブログ: LINEログインとの連携方法](https://developers-jp.googleblog.com/2016/11/authenticate-your-firebase-users-with-line-login.html)

## 2. 想定利用者

- Firebase + LINEログインの連携を検討している開発者
- LINEアカウント連携の実装事例を探しているエンジニア
- OAuth2、カスタムトークン、セッション管理の挙動を確認したい人

## 3. スコープ

### ✅ フロントエンド
- LINEログインボタン
- Firebaseの認証状態表示（ログイン / 未ログイン）
- ログアウト機能

### ✅ バックエンド
- LINEログインのOAuth 2.0フロー処理
- アクセストークン・プロフィール取得
- Firebase Admin SDKを使ったカスタムトークン生成

## 4. 成果物

| 種別         | 内容                                                                 |
|--------------|----------------------------------------------------------------------|
| デモURL      | スマホ・PC 双方で動作するログインデモサイト                         |
| コードベース | GitHubにて公開（Firebase Hosting / Functions構成）                 |
| 技術資料     | READMEまたは技術解説ブログ（導入手順、構成図、補足解説含む）        |

## 5. 使用技術

- **CI/CD**: GitHub Actions によるコードチェック、Firebase Hosting への自動デプロイ、Functions のビルド
- **認証基盤**: Firebase Authentication（カスタム認証）
- **ログインプロバイダ**: LINE Login（LINE Developers で設定）
- **フロントエンド**: Nuxt
- **バックエンド**: Firebase Functions（Node.js）
- **ホスティング**: Firebase Hosting


## 6. 検証成功の条件

| 観点             | 条件                                                             |
|------------------|------------------------------------------------------------------|
| 認証連携         | LINEアカウントでFirebase Authenticationにログインできる         |
| マルチデバイス対応 | iOS Safari / Android / PC ブラウザのすべてで正常に動作すること |
| セッション維持   | LINEアプリから戻った後もログイン状態が正しく保持されること     |

