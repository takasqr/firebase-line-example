# ディレクトリ構成（Firebase Authentication × LINEログイン技術検証デモサイト）

本プロジェクトは、フロントエンド（Nuxt 3）とバックエンド（Firebase Functions）を完全に分離した構成を採用しています。

## 📁 ディレクトリ構成

```
firebase-line-login-demo/
├── functions/                   # バックエンド：Firebase Functions（Node.js）
│   ├── src/
│   │   ├── index.ts            # Functions のエントリーポイント
│   │   └── handlers/
│   │       └── lineCallback.ts # LINE OAuth コールバック処理
│   ├── package.json
│   ├── tsconfig.json
│   └── .eslintrc.json
│
├── frontend/                    # フロントエンド：Nuxt 3 アプリケーション
│   ├── pages/
│   │   ├── index.vue           # トップページ（ログインボタンなど）
│   │   └── dashboard.vue       # 認証後に遷移するページ
│   ├── composables/
│   │   └── useAuth.ts          # Firebase認証状態の管理用Composable
│   ├── plugins/
│   │   └── firebase.client.ts  # Firebase JS SDK の初期化
│   ├── nuxt.config.ts
│   ├── package.json
│   ├── tsconfig.json
│   └── .output/                # `nuxi build` による静的出力先
│
├── firebase.json               # Firebase Hosting & Functions 設定ファイル
├── .firebaserc                 # Firebase プロジェクト設定
└── README.md
```

## 🔧 firebase.json の設定例

```json
{
  "functions": {
    "source": "functions"
  },
  "hosting": {
    "public": "frontend/.output/public",
    "ignore": ["firebase.json", "**/.*", "**/node_modules/**"],
    "rewrites": [
      {
        "source": "/api/**",
        "function": "api"
      },
      {
        "source": "**",
        "destination": "/index.html"
      }
    ]
  }
}
```

## 💡 備考

- Nuxt アプリは `nuxi build` を使って `.output/public` に静的サイトとしてビルドされ、Firebase Hosting から配信されます。
- API リクエスト（例: `/api/line-callback`）は Firebase Functions にルーティングされます。
- 開発・ビルド・デプロイのパイプラインをそれぞれ独立して管理できる構成です。

